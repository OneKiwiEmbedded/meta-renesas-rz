From 561801649a007e40da4995dca1ef0bcf7c505f8c Mon Sep 17 00:00:00 2001
From: Quynh Nguyen <quynh.nguyen.xb@renesas.com>
Date: Fri, 16 Dec 2022 15:23:24 +0700
Subject: [PATCH] vspmfilter: Add meson.build to build vspmfilter source

Signed-off-by: Quynh Nguyen <quynh.nguyen.xb@renesas.com>
---
 gst/meson.build            |  2 +-
 gst/vspmfilter/meson.build | 13 +++++++++++++
 meson_options.txt          |  1 +
 3 files changed, 15 insertions(+), 1 deletion(-)
 create mode 100644 gst/vspmfilter/meson.build

diff --git a/gst/meson.build b/gst/meson.build
index 91be2a0..e1c0dce 100644
--- a/gst/meson.build
+++ b/gst/meson.build
@@ -1,7 +1,7 @@
 foreach plugin : ['adder', 'app', 'audioconvert', 'audiomixer', 'audiorate', 'audioresample',
                   'audiotestsrc', 'compositor', 'encoding', 'gio', 'overlaycomposition', 'pbtypes', 'playback',
                   'rawparse', 'subparse', 'tcp', 'typefind', 'videoconvert', 'videorate', 'videoscale',
-                  'videotestsrc', 'volume']
+                  'videotestsrc', 'volume', 'vspmfilter']
   if not get_option(plugin).disabled()
     subdir(plugin)
   endif
diff --git a/gst/vspmfilter/meson.build b/gst/vspmfilter/meson.build
new file mode 100644
index 0000000..d31f2a2
--- /dev/null
+++ b/gst/vspmfilter/meson.build
@@ -0,0 +1,13 @@
+vspm = cc.find_library('vspm', required : true)
+mmngrbuf = cc.find_library('mmngrbuf', required : true)
+mmngr= cc.find_library('mmngr', required : true)
+
+gstvspmfilter = library('gstvspmfilter',
+    'gstvspmfilter.c',
+      c_args : gst_plugins_base_args,
+        include_directories: [configinc, libsinc],
+	  dependencies : [video_dep, vspm, mmngrbuf, mmngr, allocators_dep],
+	    install : true,
+	      install_dir : plugins_install_dir,
+	      )
+pkgconfig.generate(gstvspmfilter, install_dir : plugins_pkgconfig_install_dir)
diff --git a/meson_options.txt b/meson_options.txt
index 2983409..0085b0d 100644
--- a/meson_options.txt
+++ b/meson_options.txt
@@ -48,6 +48,7 @@ option('typefind', type : 'feature', value : 'auto')
 option('videoconvert', type : 'feature', value : 'auto')
 option('videorate', type : 'feature', value : 'auto')
 option('videoscale', type : 'feature', value : 'auto')
+option('vspmfilter', type : 'feature', value : 'auto')
 option('videotestsrc', type : 'feature', value : 'auto')
 option('volume', type : 'feature', value : 'auto')
 
-- 
2.25.1

